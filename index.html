<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸‹é–¢å¸‚ å£è‡­ãƒ»å¥åº·ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap');
        body { font-family: 'Noto Sans JP', sans-serif; background-color: #F8FAFC; color: #1E293B; }
        .option-card { transition: all 0.2s; border: 2px solid #E2E8F0; cursor: pointer; }
        .option-card:active { transform: scale(0.98); }
        .progress-bar { transition: width 0.4s ease; }
        .hidden { display: none; }
        .advice-card { border-left: 4px solid #0ea5e9; background: #f0f9ff; padding: 1rem; border-radius: 0.75rem; font-size: 0.8rem; margin-bottom: 0.75rem; }
        .patho-advice { border-left-color: #f43f5e; background: #fff1f2; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4">

    <div id="quiz-screen" class="w-full max-w-md bg-white rounded-[2.5rem] shadow-xl overflow-hidden mt-4">
        <div class="bg-sky-600 p-6 text-white text-center">
            <h1 class="text-xl font-black italic tracking-tighter uppercase">Shimonoseki Health</h1>
            <div class="mt-4 bg-white/20 rounded-full h-1.5 overflow-hidden">
                <div id="progress" class="progress-bar bg-white h-full" style="width: 5%"></div>
            </div>
            <div id="q-count" class="text-[10px] mt-2 font-bold opacity-80 uppercase tracking-widest">Question 01/20</div>
        </div>
        <div class="p-8">
            <div id="question-text" class="text-lg font-black leading-tight text-slate-800 mb-8 min-h-[4rem]"></div>
            <div id="options" class="space-y-3"></div>
        </div>
    </div>

    <div id="result-screen" class="hidden w-full max-w-md bg-white rounded-[2.5rem] shadow-xl overflow-hidden mt-4 mb-8">
        <div class="bg-slate-800 p-8 text-white text-center">
            <span class="bg-sky-500 text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest">Analysis Result</span>
            <h2 class="text-2xl font-black mt-3">ã‚ãªãŸã®ã€Œå£è‡­ãƒ»å¥åº·ã€è¨ºæ–­æ›¸</h2>
        </div>

        <div class="p-6">
            <div class="mb-8">
                <canvas id="resultChart"></canvas>
            </div>
            
            <div class="space-y-6">
                <section>
                    <h3 class="flex items-center font-black text-slate-800 mb-3 text-sm">
                        <span class="w-2 h-6 bg-sky-500 rounded-full mr-2"></span> ä¸€æ™‚çš„ãƒ»ç”Ÿç†çš„ãƒªã‚¹ã‚¯
                    </h3>
                    <div id="res-box1" class="p-4 rounded-2xl border text-sm leading-relaxed">
                        <strong id="res-title1" class="block mb-2 text-lg"></strong>
                        <p id="res-desc1"></p>
                    </div>
                </section>

                <section>
                    <h3 class="flex items-center font-black text-slate-800 mb-3 text-sm">
                        <span class="w-2 h-6 bg-rose-500 rounded-full mr-2"></span> ç”Ÿæ´»ç¿’æ…£ãƒ»ç—…çš„ãƒªã‚¹ã‚¯
                    </h3>
                    <div id="res-box2" class="p-4 rounded-2xl border text-sm leading-relaxed">
                        <strong id="res-title2" class="block mb-2 text-lg"></strong>
                        <p id="res-desc2"></p>
                    </div>
                </section>
            </div>

            <hr class="my-8 border-slate-100">

            <section id="pinpoint-section" class="mb-8">
                <h3 class="font-black text-slate-800 mb-4 text-sm flex items-center">
                    <span class="mr-2">ğŸ“</span> ã‚ãªãŸã®å›ç­”ã«åŸºã¥ã„ãŸã‚¢ãƒ‰ãƒã‚¤ã‚¹
                </h3>
                <div id="advice-container"></div>
            </section>

            <section class="bg-slate-50 p-6 rounded-[2rem] border border-slate-200 mb-8">
                <h3 class="font-black text-slate-800 text-sm mb-1">ã‚ãªãŸã ã‘ã®ã€Œå¥åº·ã®ã‚³ãƒ„ã€ã‚’äºˆç´„</h3>
                <p class="text-[10px] text-slate-500 mb-4 italic">è¨ºæ–­çµæœã«åŸºã¥ã„ãŸãŠã™ã™ã‚é …ç›®ã‚’ä¸Šä½ã«è¡¨ç¤ºã—ã¦ã„ã¾ã™</p>
                
                <div id="notification-list" class="space-y-2 mb-4">
                    </div>

                <div class="space-y-3 mt-4">
                    <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest">é€šçŸ¥ã‚’å¸Œæœ›ã™ã‚‹æ™‚é–“</label>
                    <input type="datetime-local" id="remind-time" class="w-full p-4 rounded-2xl border border-slate-200 text-sm font-bold bg-white">
                    <button onclick="saveRemind()" id="remind-btn" class="w-full bg-sky-600 text-white py-4 rounded-2xl font-black text-sm hover:bg-sky-700 shadow-lg transition-all">é€šçŸ¥ãƒ—ãƒ©ãƒ³ã‚’ç¢ºå®šã™ã‚‹</button>
                </div>
            </section>

            <button onclick="goToDetail()" class="w-full bg-slate-800 text-white py-5 rounded-[2rem] font-black text-sm hover:bg-slate-700 transition-all shadow-xl">åŸå› ã¨å¯¾ç­–ã‚’ã•ã‚‰ã«æ·±æ˜ã‚Šã™ã‚‹</button>
            <button onclick="resetQuiz()" class="w-full mt-4 bg-slate-100 text-slate-400 py-4 rounded-[2rem] font-bold text-xs">æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
        </div>
    </div>

    <script>
        const questions = [
            // è»¸â‘ ï¼šä¸€æ™‚çš„
            { id: 1, q: "æœèµ·ããŸã¨ãã‚„ã€ãŠè…¹ãŒç©ºã„ã¦ã„ã‚‹ã¨ãã«ç‰¹ã«ãŠå£ãŒè‡­ã†ï¼Ÿ", cat: 1, adv: "æœä¸€ç•ªã®ã†ãŒã„ã‚„ã€èµ·ãã¦ã™ãã®ã‚³ãƒƒãƒ—1æ¯ã®æ°´åˆ†è£œçµ¦ãŒã€æœã®çˆ½ã‚„ã‹ã•ã‚’ä½œã‚‹ã‚³ãƒ„ã§ã™ã€‚" },
            { id: 2, q: "é¡ã§è¦‹ã‚‹ã¨ã€èˆŒã®ä¸ŠãŒç™½ãåšããªã£ã¦ã„ã‚‹ï¼Ÿ", cat: 1, adv: "èˆŒã®ä¸Šã®ç™½ã„æ±šã‚Œã¯ãƒ‹ã‚ªã‚¤ã®æœ€å¤§åŸå› ã§ã™ã€‚1æ—¥1å›ã€æœã®ã€ŒèˆŒãƒ–ãƒ©ã‚·ã€ã§å„ªã—ããªã§ã‚‹ã ã‘ã§åŠ‡çš„ã«å¤‰ã‚ã‚Šã¾ã™ã€‚" },
            { id: 3, q: "ç¾åœ¨ã€ä»•äº‹ã‚„å®¶åº­ãªã©ã§å¼·ã„ã‚¹ãƒˆãƒ¬ã‚¹ã‚„ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã‚’æ„Ÿã˜ã¦ã„ã‚‹ï¼Ÿ", cat: 1, adv: "ã‚¹ãƒˆãƒ¬ã‚¹ã¯å”¾æ¶²ã‚’æ­¢ã‚ã¾ã™ã€‚æ·±å‘¼å¸ã‚’3å›ã™ã‚‹ã ã‘ã§ã‚‚å”¾æ¶²ã¯å‡ºã‚„ã™ããªã‚Šã¾ã™ã€‚ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚’å¿ƒãŒã‘ã¦ã€‚" },
            { id: 4, q: "ç·Šå¼µã™ã‚‹ã¨å£ã®ä¸­ãŒãƒãƒãƒãƒã—ã€è©±ã—ã«ãã„ã¨æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚‹ï¼Ÿ", cat: 1, adv: "ãƒãƒã¤ãã¯å”¾æ¶²ã®å¤‰åŒ–ã€‚é ¬ã‚’å„ªã—ããƒãƒƒã‚µãƒ¼ã‚¸ã™ã‚‹ã€Œå”¾æ¶²è…ºãƒãƒƒã‚µãƒ¼ã‚¸ã€ã§ã‚µãƒ©ã‚µãƒ©ã®å”¾æ¶²ã‚’å‘¼ã³æˆ»ã—ã¾ã—ã‚‡ã†ã€‚" },
            { id: 5, q: "æ—¥ä¸­ã€æ°´ã‚„ãŠèŒ¶ãªã©ã®æ°´åˆ†ã‚’ã‚ã¾ã‚Šæ‘‚ã‚‰ãªã„ï¼Ÿ", cat: 1, adv: "ãŠèŒ¶ã‚„ã‚³ãƒ¼ãƒ’ãƒ¼ã‚ˆã‚Šã‚‚ã€ã¾ãšã¯ã€ŒãŠæ°´ã€ã‚’ã€‚ã²ã¨å£ãšã¤ã€ã“ã¾ã‚ã«å£ã‚’æ½¤ã™ç¿’æ…£ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚" },
            { id: 6, q: "ï¼ˆå¥³æ€§ã®æ–¹ï¼‰ç”Ÿç†å‰å¾Œã‚„æ›´å¹´æœŸã®æ™‚æœŸã«å½“ãŸã£ã¦ã„ã‚‹ï¼Ÿ", cat: 1, adv: "ãƒ›ãƒ«ãƒ¢ãƒ³ãƒãƒ©ãƒ³ã‚¹ã®å¤‰å‹•æœŸã¯ã€æ­¯ãããŒæ•æ„Ÿã«ãªã‚Šã¾ã™ã€‚ã„ã¤ã‚‚ã‚ˆã‚Šä¸å¯§ãªæ­¯ç£¨ãã¨ã€ãŸã£ã·ã‚Šã®ä¼‘æ¯ã‚’ã€‚" },
            { id: 7, q: "ç¡çœ ä¸è¶³ã‚„ç–²ã‚ŒãŒæºœã¾ã£ã¦ã„ã¦ã€ä½“èª¿ãŒä¸‡å…¨ã§ã¯ãªã„ï¼Ÿ", cat: 1, adv: "ãƒ‹ã‚ªã‚¤ã¯ã€Œä½“ãŒä¼‘ã¿ãŸã„ã€ã‚µã‚¤ãƒ³ã‹ã‚‚ã€‚ä»Šæ—¥ã¯ã‚¹ãƒãƒ›ã‚’ç½®ã„ã¦ã€30åˆ†æ—©ãå¯ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ" },
            { id: 8, q: "æ˜¨å¤œã€ãƒ‹ãƒ³ãƒ‹ã‚¯æ–™ç†ã‚’é£Ÿã¹ãŸã‚Šã€ãŠé…’ã‚’å¤šã‚ã«é£²ã‚“ã ï¼Ÿ", cat: 1, adv: "è¡€æ¶²ä¸­ã®æˆåˆ†ãŒè‚ºã‹ã‚‰å‡ºã¦ã„ã¾ã™ã€‚ãƒªãƒ³ã‚´ã‚¸ãƒ¥ãƒ¼ã‚¹ã‚’é£²ã‚€ã¨åˆ†è§£ã‚’åŠ©ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚" },
            { id: 9, q: "1æ—¥ã®æ­¯ç£¨ãã®å›æ•°ãŒã€2å›ä»¥ä¸‹ã§ã‚ã‚‹ï¼Ÿ", cat: 1, adv: "ç´°èŒã¯æ•°æ™‚é–“ã§å¢—ãˆã¾ã™ã€‚æ˜¼é£Ÿå¾Œã‚‚ã€é›£ã—ã„å ´åˆã¯ãŠæ°´ã§ã€Œãƒ–ã‚¯ãƒ–ã‚¯ã†ãŒã„ã€ã ã‘ã§ã‚‚åŠ¹æœçš„ã§ã™ã€‚" },
            { id: 10, q: "å¯ã¦ã„ã‚‹æ™‚ã«ã€ç„¡æ„è­˜ã«å£ãŒé–‹ã„ã¦ã„ã‚‹ï¼ˆå£å‘¼å¸ï¼‰ã¨æŒ‡æ‘˜ã•ã‚Œã‚‹ï¼Ÿ", cat: 1, adv: "å£å‘¼å¸ã¯ä¹¾ç‡¥ã®å…ƒã€‚æ„è­˜çš„ãªé¼»å‘¼å¸ã¨ã€å¯ã‚‹å‰ã®æ°´åˆ†è£œçµ¦ã‚’å¤§åˆ‡ã«ã—ã¾ã—ã‚‡ã†ã€‚" },
            // è»¸â‘¡ï¼šç—…çš„
            { id: 11, q: "å£è‡­ã®æ‚©ã¿ãŒ2é€±é–“ä»¥ä¸Šã€é•·ãç¶šã„ã¦ã„ã‚‹ï¼Ÿ", cat: 2, adv: "é•·ãç¶šããƒ‹ã‚ªã‚¤ã¯ã‚»ãƒ«ãƒ•ã‚±ã‚¢ã®é™ç•Œã‹ã‚‚ã€‚åŸå› ç‰¹å®šã®ãŸã«ã€ãƒ—ãƒ­ã®ãƒã‚§ãƒƒã‚¯ã‚’å¼·ããŠã™ã™ã‚ã—ã¾ã™ã€‚" },
            { id: 12, q: "æ­¯ã‚’ç£¨ãã¨ãã€æ­¯ããã‹ã‚‰è¡€ãŒå‡ºã‚‹ã“ã¨ãŒã‚ã‚‹ï¼Ÿ", cat: 2, adv: "å‡ºè¡€ã¯æ­¯å‘¨ç—…ã®ã‚µã‚¤ãƒ³ã€‚æ­¯å‘¨ç—…ã¯ç³–å°¿ç—…ãªã©ã®å…¨èº«ç–¾æ‚£ã¨ã‚‚ç¹‹ãŒã£ã¦ã„ã¾ã™ã€‚æ­¯ç§‘å—è¨ºã‚’æ¤œè¨ã—ã¾ã—ã‚‡ã†ã€‚" },
            { id: 13, q: "æ­¯ãŒã‚°ãƒ©ã¤ã„ãŸã‚Šã€æ­¯ãããŒè…«ã‚ŒãŸã‚Šã—ã¦ã„ã‚‹å ´æ‰€ãŒã‚ã‚‹ï¼Ÿ", cat: 2, adv: "é‡åº¦ã®ç‚ç—‡ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ”¾ç½®ã™ã‚‹ã¨æ­¯ã‚’å¤±ã†ã ã‘ã§ãªãã€å…¨èº«ç–¾æ‚£ã®ãƒªã‚¹ã‚¯ã‚’é«˜ã‚ã¾ã™ã€‚" },
            { id: 14, q: "ä»¥å‰ã‚ˆã‚Šå–‰ãŒç•°å¸¸ã«æ¸‡ãã€ãƒˆã‚¤ãƒ¬ã«è¡Œãå›æ•°ãŒå¢—ãˆãŸï¼Ÿ", cat: 2, adv: "è¡€ç³–å€¤ã®çŠ¶æ…‹ãŒé–¢ä¿‚ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å†…ç§‘ã®å¥è¨ºã§ã€Œå®‰å¿ƒã€ã‚’ç¢ºèªã—ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ" },
            { id: 15, q: "é¼»ãŒè©°ã¾ã‚Šã‚„ã™ã‹ã£ãŸã‚Šã€å–‰ã®å¥¥ã«é¼»æ°´ãŒè½ã¡ã‚‹æ„Ÿè¦šãŒã‚ã‚‹ï¼Ÿ", cat: 2, adv: "å‰¯é¼»è…”ç‚ãªã©ã®è€³é¼»å’½å–‰ç–¾æ‚£ã®ç–‘ã„ãŒã‚ã‚Šã¾ã™ã€‚å¿ƒå½“ãŸã‚ŠãŒã‚ã‚Œã°è€³é¼»ç§‘ã¸ç›¸è«‡ã‚’ã€‚" },
            { id: 16, q: "ãŠé…’ã‚’é£²ã¾ãªã„ã®ã«ã€ä½“ãŒã ã‚‹ã‹ã£ãŸã‚Šè¶³ãŒã‚€ãã¿ã‚„ã™ã„ï¼Ÿ", cat: 2, adv: "è‚æ©Ÿèƒ½ãƒ»è…æ©Ÿèƒ½ã®ç–²ã‚ŒãŒå‘¼æ°—ã«ç¾ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚å¥è¨ºã§æ•°å€¤ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€ä½“ã‚’åŠ´ã‚ã‚Šã¾ã—ã‚‡ã†ã€‚" },
            { id: 17, q: "èƒƒã‚‚ãŸã‚Œã€èƒ¸ç„¼ã‘ã€ã¾ãŸã¯æ…¢æ€§ã®èƒƒç—›ã«æ‚©ã¾ã•ã‚Œã¦ã„ã‚‹ï¼Ÿ", cat: 2, adv: "æ¶ˆåŒ–å™¨ç–¾æ‚£ãŒåŸå› ã§å‘¼æ°—ãŒé…¸ã£ã±ããªã‚‹ã“ã¨ã‚‚ã€‚æš´é£²æš´é£Ÿã‚’é¿ã‘ã€æ¶ˆåŒ–ã«è‰¯ã„é£Ÿäº‹ã‚’ã€‚" },
            { id: 18, q: "æ—¥å¸¸çš„ã«ã‚¿ãƒã‚³ã‚’å¸ã£ã¦ã„ã‚‹ï¼Ÿ", cat: 2, adv: "ã‚¿ãƒã‚³ã¯è¡€æµã‚’é˜»å®³ã—ç—…æ°—ã‚’éš ã—ã¾ã™ã€‚æœ¬æ•°ã‚’1æœ¬æ¸›ã‚‰ã™ã“ã¨ã‹ã‚‰å§‹ã‚ã¾ã›ã‚“ã‹ï¼Ÿ" },
            { id: 19, q: "æœ€è¿‘ã€æ€¥ã«ã€Œç”˜ã„ã‚‚ã®ã€ãŒæ¬²ã—ããªã£ãŸã‚Šã€é£Ÿå¾Œã«å¼·ã„çœ æ°—ã‚’æ„Ÿã˜ã‚‹ï¼Ÿ", cat: 2, adv: "è¡€ç³–å€¤ã®ã‚µã‚¤ãƒ³ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãŠå£ã¯è¡€ç®¡ã®å¥åº·ã¨ç¹‹ãŒã£ã¦ã„ã¾ã™ã€‚å¥è¨ºã§æ•°å€¤ã®ç¢ºèªã‚’ã€‚" },
            { id: 20, q: "å¤•æ–¹ã«é´ãŒãã¤ãæ„Ÿã˜ã‚‹ã»ã©ã€è¶³ãŒã‚€ãã‚€ã“ã¨ãŒã‚ã‚‹ï¼Ÿ", cat: 2, adv: "è¡€æµã®æ»ã‚ŠãŒãŠå£ã«ã‚‚å½±éŸ¿ã—ã¾ã™ã€‚ã‚¹ãƒˆãƒ¬ãƒƒãƒã‚„ãŠé…’ã‚’æ§ãˆã‚‹æ—¥ã§å·¡ã‚Šã‚’æ•´ãˆã¾ã—ã‚‡ã†ã€‚" }
        ];

        let currentIdx = 0;
        let userResponses = [];
        let scores = { 1: 0, 2: 0 };

        window.onload = function() {
            const saved = localStorage.getItem('kuchi_check_data');
            if (saved) {
                const data = JSON.parse(saved);
                scores = data.scores;
                userResponses = data.responses;
                showResult(false);
            } else {
                renderQuestion();
            }
        };

        function renderQuestion() {
            const q = questions[currentIdx];
            document.getElementById('question-text').innerText = q.q;
            document.getElementById('q-count').innerText = `Question ${String(currentIdx + 1).padStart(2, '0')}/20`;
            document.getElementById('progress').style.width = `${((currentIdx + 1) / 20) * 100}%`;
            
            const container = document.getElementById('options');
            container.innerHTML = '';
            
            const opts = [
                { text: "ã‚ˆãã‚ã‚‹ / å½“ã¦ã¯ã¾ã‚‹", pts: 10, val: "A" },
                { text: "ãŸã¾ã«ã‚ã‚‹ / å°‘ã—æ°—ã«ãªã‚‹", pts: 5, val: "B" },
                { text: "ã»ã¨ã‚“ã©ãªã„ / å…¨ããªã„", pts: 0, val: "C" }
            ];

            opts.forEach(o => {
                const b = document.createElement('div');
                b.className = "option-card bg-white p-5 rounded-2xl font-bold text-slate-700 flex justify-between items-center shadow-sm";
                b.innerHTML = `<span>${o.text}</span><span class="text-slate-300 font-black">â†’</span>`;
                b.onclick = () => {
                    scores[q.cat] += o.pts;
                    userResponses.push({ id: q.id, val: o.val, cat: q.cat });
                    if(++currentIdx < questions.length) renderQuestion(); else showResult(true);
                };
                container.appendChild(b);
            });
        }

        function showResult(shouldSave) {
            if(shouldSave) localStorage.setItem('kuchi_check_data', JSON.stringify({scores, responses: userResponses}));
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            const s1 = scores[1], s2 = scores[2];
            
            [span_5](start_span)// ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ­ã‚¸ãƒƒã‚¯åæ˜ [span_5](end_span)
            setFeedback(1, s1);
            setFeedback(2, s2);

            [span_6](start_span)// ã‚¢ãƒ‰ãƒã‚¤ã‚¹ç”Ÿæˆ[span_6](end_span)
            const container = document.getElementById('advice-container');
            container.innerHTML = '';
            userResponses.filter(r => r.val !== 'C').forEach(r => {
                const qObj = questions.find(q => q.id === r.id);
                const d = document.createElement('div');
                d.className = `advice-card ${r.cat === 2 ? 'patho-advice' : ''}`;
                d.innerHTML = `<strong>Q. ${qObj.q}</strong><p class="mt-1">${qObj.adv}</p>`;
                container.appendChild(d);
            });

            renderChart(s1, s2);
            renderNotificationMenu();
        }

        function setFeedback(cat, score) {
            const title = document.getElementById(`res-title${cat}`);
            const desc = document.getElementById(`res-desc${cat}`);
            const box = document.getElementById(`res-box${cat}`);

            [span_7](start_span)if(cat === 1) { // ä¸€æ™‚çš„[span_7](end_span)
                if(score <= 20) { title.innerText = "ã€å®‰å¿ƒã€‘ã™ã°ã‚‰ã—ã„ï¼"; desc.innerText = "ç¾åœ¨ã€ãŠå£ã®ç’°å¢ƒã¯ã¨ã¦ã‚‚è‰¯ã„ã§ã™ã€‚ä»Šã®ã‚±ã‚¢ç¿’æ…£ã‚’å¤§åˆ‡ã«ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚"; box.className += " border-sky-200 bg-sky-50 text-sky-800"; }
                else if(score <= 40) { title.innerText = "ã€å°‘ã—æ³¨æ„ã€‘å°‘ã—ãŠç–²ã‚Œæ°—å‘³ã‹ã‚‚"; desc.innerText = "ã‚„ã‚„ãƒªã‚¹ã‚¯ãŒä¸Šæ˜‡ã—ã¦ã„ã¾ã™ã€‚ã‚³ãƒƒãƒ—1æ¯ã®æ°´ã‚’é£²ã‚“ã§ä¼‘æ¯ã‚’ã€‚"; box.className += " border-amber-200 bg-amber-50 text-amber-800"; }
                else { title.innerText = "ã€è¦è­¦æˆ’ã€‘ç’°å¢ƒãŒä¹±ã‚Œã¦ã„ã¾ã™"; desc.innerText = "ãƒªã‚¹ã‚¯ãŒé«˜ã„çŠ¶æ…‹ã€‚ã‚¹ãƒˆãƒ¬ã‚¹ã‚„ç–²ã‚Œã§ãŠå£ã®è‡ªæµ„ä½œç”¨ãŒå¼±ã¾ã£ã¦ã„ã¾ã™ã€‚ä¸å¯§ãªã‚»ãƒ«ãƒ•ã‚±ã‚¢ã‚’ã€‚"; box.className += " border-rose-200 bg-rose-50 text-rose-800"; }
            [span_8](start_span)} else { // ç—…çš„[span_8](end_span)
                if(score <= 20) { title.innerText = "ã€å®‰å…¨ã€‘ãƒªã‚¹ã‚¯ä½ã‚"; desc.innerText = "ç¾æ™‚ç‚¹ã§ç—…çš„ãªè¦å› ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚å®šæœŸçš„ãªãƒã‚§ãƒƒã‚¯ã‚’ç¶™ç¶šã—ã¾ã—ã‚‡ã†ã€‚"; box.className += " border-sky-200 bg-sky-50 text-sky-800"; }
                else if(score <= 40) { title.innerText = "ã€äºˆå‚™è»ï¼Ÿã€‘å°ã•ãªå¤‰åŒ–ã«æ³¨æ„"; desc.innerText = "å°†æ¥çš„ãªãƒªã‚¹ã‚¯ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ä»Šã‹ã‚‰ç”Ÿæ´»ç¿’æ…£ã‚’è¦‹ç›´ã—ã¾ã—ã‚‡ã†ã€‚"; box.className += " border-amber-200 bg-amber-50 text-amber-800"; }
                else { 
                    title.innerText = "ã€é‡è¦ã‚µã‚¤ãƒ³ã€‘å°‚é–€å®¶ã¸ã®ç›¸è«‡ã‚’"; 
                    // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åæ˜ ï¼šç–¾æ‚£åã‚’æ˜è¨˜
                    desc.innerText = "æ”¾ç½®ã§ããªã„ãƒªã‚¹ã‚¯å€¤ã§ã™ã€‚é€²è¡Œã—ãŸæ­¯å‘¨ç—…ã‚„ã€ç³–å°¿ç—…ã€è‚ãƒ»è…æ©Ÿèƒ½ã®ä½ä¸‹ãªã©ã®ã€Œéš ã‚ŒãŸã‚µã‚¤ãƒ³ã€ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ä¸‹é–¢å¸‚ã®å¥è¨ºå—è¨ºã‚’å¼·ããŠã™ã™ã‚ã—ã¾ã™ã€‚"; 
                    box.className += " border-rose-200 bg-rose-50 text-rose-800"; 
                }
            }
        }

        function renderChart(s1, s2) {
            new Chart(document.getElementById('resultChart'), {
                type: 'radar',
                data: {
                    labels: ['èµ·åºŠæ™‚', 'ã‚¹ãƒˆãƒ¬ã‚¹', 'ç”Ÿæ´»ç¿’æ…£', 'æ­¯å‘¨ã‚µã‚¤ãƒ³', 'å…¨èº«ã‚µã‚¤ãƒ³', 'ä»£è¬'],
                    datasets: [{
                        label: 'ãƒªã‚¹ã‚¯å‚¾å‘',
                        data: [s1, s1*0.8, s1*1.1, s2, s2*0.9, s2*1.2],
                        backgroundColor: 'rgba(14, 165, 233, 0.2)', borderColor: '#0ea5e9', borderWidth: 3
                    }]
                },
                options: { scales: { r: { min: 0, max: 100, ticks: { display: false } } }, plugins: { legend: { display: false } } }
            });
        }

        [span_9](start_span)// é€šçŸ¥ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®å‹•çš„ä¸¦ã³æ›¿ãˆ[span_9](end_span)
        function renderNotificationMenu() {
            const menuData = [
                { id: 'm1', qId: 1, name: 'æœã¨å¤œã®ã€Œæ½¤ã„ãƒªãƒã‚¤ãƒ³ãƒ‰ã€', icon: 'ğŸ’§' },
                { id: 'm2', qId: 2, name: 'æœã®ã€ŒèˆŒã‚±ã‚¢ç¿’æ…£ãƒªãƒã‚¤ãƒ³ãƒ‰ã€', icon: 'ğŸ‘…' },
                { id: 'm3', qId: 5, name: 'ã“ã¾ã‚ãªã€Œæ°´åˆ†è£œçµ¦ãƒªãƒã‚¤ãƒ³ãƒ‰ã€', icon: 'ğŸ¥¤' },
                { id: 'm4', qId: 7, name: 'å¤œã®ã€Œæ—©å¯ãƒ»ãƒªãƒ©ãƒƒã‚¯ã‚¹é€šçŸ¥ã€', icon: 'ğŸŒ™' },
                { id: 'm5', qId: 18, name: 'æœ¬æ•°ã‚’æ¸›ã‚‰ã™å¿œæ´é€šçŸ¥', icon: 'ğŸš¬' },
                { id: 'm6', qId: 19, name: 'é£Ÿå¾Œã®ä½“èª¿ã‚±ã‚¢ãƒ»å¥è¨ºã®ã‚¹ã‚¹ãƒ¡', icon: 'ğŸ¥' }
            ];

            const list = document.getElementById('notification-list');
            list.innerHTML = '';

            // A/Bå›ç­”ã®ã‚‚ã®ã‚’å„ªå…ˆè¡¨ç¤º
            const sortedMenu = menuData.sort((a, b) => {
                const respA = userResponses.find(r => r.id === a.qId)?.val || 'C';
                const respB = userResponses.find(r => r.id === b.qId)?.val || 'C';
                return (respA < respB) ? -1 : 1;
            });

            sortedMenu.forEach(m => {
                const isRecommended = userResponses.find(r => r.id === m.qId)?.val !== 'C';
                const item = document.createElement('label');
                item.className = `flex items-center p-4 rounded-2xl bg-white border ${isRecommended ? 'border-sky-500 ring-1 ring-sky-500' : 'border-slate-200'} cursor-pointer`;
                item.innerHTML = `
                    <input type="checkbox" class="w-5 h-5 accent-sky-600" ${isRecommended ? 'checked' : ''}>
                    <div class="ml-3 flex-1">
                        <span class="text-xs font-black text-slate-800">${m.icon} ${m.name}</span>
                        ${isRecommended ? '<span class="block text-[8px] text-sky-600 font-bold uppercase">Recommend</span>' : ''}
                    </div>
                `;
                list.appendChild(item);
            });
        }

        async function saveRemind() {
            const btn = document.getElementById('remind-btn');
            btn.disabled = true; btn.innerText = "ãƒ—ãƒ©ãƒ³ã‚’é€ä¿¡ä¸­...";
            // å®Ÿéš›ã¯ã“ã“ã§GASã¸é€ä¿¡
            setTimeout(() => {
                alert('ãƒªãƒã‚¤ãƒ³ãƒ‰é€šçŸ¥ã®è¨­å®šã‚’å®Œäº†ã—ã¾ã—ãŸï¼ä¸‹é–¢å¸‚å…¬å¼LINEã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå±Šãã¾ã™ã€‚');
                btn.innerText = "è¨­å®šå®Œäº†";
            }, 1000);
        }

        function resetQuiz() { if(confirm('ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¦æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã—ã¾ã™ã‹ï¼Ÿ')) { localStorage.clear(); location.reload(); } }
        function goToDetail() { sessionStorage.setItem('fromQuiz', 'true'); location.href = 'detail.html'; }
    </script>
</body>
</html>
